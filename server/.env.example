# 医学宝典 - 环境变量配置示例
# 复制此文件为 .env.local 并填写实际配置

# ==================== 应用配置 ====================
NODE_ENV=development
PORT=3000

# CORS 跨域配置
# 开发环境: 可以使用逗号分隔的多个域名，例如: "http://localhost:5173,http://localhost:3000"
# 生产环境: 必须指定具体域名，不能使用 "*" 通配符
# 格式: "https://domain1.com,https://domain2.com"
CORS_ORIGIN=http://localhost:5173

# ==================== 数据库配置 ====================
DB_HOST=localhost
DB_PORT=3306
DB_USERNAME=root
DB_PASSWORD=your_password_here
DB_DATABASE=medical_bible

# ==================== Redis 配置 ====================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ==================== JWT 配置 ====================
JWT_SECRET=your_jwt_secret_here_please_change_it
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# ==================== 加密密钥 ====================
# 用于加密敏感配置（如支付密钥），请使用随机字符串
# 生产环境必须设置此值，否则使用不安全的默认密钥
ENCRYPTION_KEY=your_random_encryption_key_at_least_32_chars

# ==================== 阿里云 OSS 配置 ====================
OSS_ACCESS_KEY_ID=your_access_key_id
OSS_ACCESS_KEY_SECRET=your_access_key_secret
OSS_BUCKET=medical-bible
OSS_REGION=oss-cn-beijing
OSS_ENDPOINT=https://oss-cn-beijing.aliyuncs.com

# ==================== APM 性能监控配置 ====================
# 应用性能监控（基于 OpenTelemetry）
# APM_ENABLED: 是否启用 APM（默认 true）
APM_ENABLED=true

# APM_SERVICE_NAME: 服务名称（用于追踪和指标识别）
APM_SERVICE_NAME=medical-bible-api

# APM_SERVICE_VERSION: 服务版本
APM_SERVICE_VERSION=1.0.0

# APM_ENVIRONMENT: 部署环境（development/production）
APM_ENVIRONMENT=development

# APM_SERVICE_TYPE: APM 后端服务类型
# 可选值: console（控制台）, otlp（OpenTelemetry 协议）, jaeger, zipkin, datadog, new_relic
# 开发环境默认 console，生产环境建议使用 otlp
APM_SERVICE_TYPE=console

# APM_OTLP_ENDPOINT: OTLP 导出端点（用于 OTLP/Jaeger/Zipkin）
# 默认: http://localhost:4317
APM_OTLP_ENDPOINT=http://localhost:4317

# APM_OTLP_HEADERS: OTLP 认证头部（JSON 格式）
# 示例: {"Authorization": "Bearer token123"}
# APM_OTLP_HEADERS={"Authorization": "Bearer your_token"}

# APM_SAMPLE_RATE: 采样率（0-1）
# 开发环境建议 1.0（全采样），生产环境建议 0.1-0.3（减少开销）
APM_SAMPLE_RATE=1.0

# APM_TRACING_ENABLED: 是否启用分布式追踪
APM_TRACING_ENABLED=true

# APM_METRICS_ENABLED: 是否启用指标收集
APM_METRICS_ENABLED=true

# APM_METRICS_EXPORT_INTERVAL: 指标导出间隔（毫秒）
# 默认: 30000（30秒）
APM_METRICS_EXPORT_INTERVAL=30000

# APM_DB_QUERY_THRESHOLD: 慢查询阈值（毫秒）
# 超过此值的查询会被记录为慢查询
APM_DB_QUERY_THRESHOLD=1000

# APM_HTTP_REQUEST_THRESHOLD: 慢请求阈值（毫秒）
# 超过此值的请求会被记录为慢请求
APM_HTTP_REQUEST_THRESHOLD=3000

# APM_REDIS_COMMAND_THRESHOLD: 慢 Redis 命令阈值（毫秒）
APM_REDIS_COMMAND_THRESHOLD=500

# APM_ALERTS_ENABLED: 是否启用告警
APM_ALERTS_ENABLED=false

# APM_ALERT_WEBHOOK_URL: 告警 Webhook URL
# 收到告警时会发送 POST 请求到此 URL
# APM_ALERT_WEBHOOK_URL=https://your-webhook-url.com/alerts

# APM_ALERT_THROTTLE_INTERVAL: 告警限流间隔（秒）
# 防止告警风暴，默认 300 秒
APM_ALERT_THROTTLE_INTERVAL=300

# APM_ADDITIONAL_LABELS: 额外的资源标签（JSON 格式）
# 示例: {"team": "backend", "region": "cn-beijing"}
# APM_ADDITIONAL_LABELS={"team": "backend"}

# ==================== 以下配置已迁移到数据库管理 ====================
# 短信、邮件、支付等配置现在通过后台管理界面配置
# 存储在 system_configs 表中，敏感信息会自动加密
