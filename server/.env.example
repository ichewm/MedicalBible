# 医学宝典 - 环境变量配置示例
# 复制此文件为 .env.local 并填写实际配置

# ==================== 应用配置 ====================
NODE_ENV=development
PORT=3000

# ==================== 文件上传配置 ====================
# 上传文件存储根目录
# 安全警告：生产环境必须将此目录设置在应用代码目录之外
# - 开发环境：可以使用相对路径 ./uploads
# - 生产环境：必须使用绝对路径，例如 /var/uploads/medical-bible
# - 原因：防止用户上传的文件与应用代码混合，提高安全性
# - 注意：确保此目录对应用进程有读写权限
UPLOAD_ROOT=./uploads

# 文件大小限制（字节，默认 50MB）
UPLOAD_MAX_SIZE=52428800

# 严格模式：验证 MIME 类型与文件扩展名匹配（默认 true）
UPLOAD_STRICT_MODE=true

# ==================== 病毒扫描配置 (SEC-008) ====================
# 是否启用病毒扫描（需要 ClamAV 服务）
UPLOAD_VIRUS_SCAN_ENABLED=false

# 病毒扫描提供商（clamav | cloud | disabled）
UPLOAD_VIRUS_SCAN_PROVIDER=clamav

# ClamAV 服务配置
UPLOAD_VIRUS_SCAN_CLAMAV_HOST=localhost
UPLOAD_VIRUS_SCAN_CLAMAV_PORT=3310
# Unix Socket 路径（优先使用，如果配置则忽略 TCP 连接）
# UPLOAD_VIRUS_SCAN_CLAMAV_SOCKET=/var/run/clamav/clamd.ctl

# 病毒扫描超时时间（毫秒）
UPLOAD_VIRUS_SCAN_TIMEOUT=30000

# 最大可扫描文件大小（字节，默认 100MB）
UPLOAD_VIRUS_SCAN_MAX_FILE_SIZE=104857600

# Fail-open 模式：扫描失败时是否允许通过（默认 true）
# - true: 扫描服务不可用时仍允许上传（适合非关键场景）
# - false: 扫描服务不可用时拒绝上传（适合高安全要求场景）
UPLOAD_VIRUS_SCAN_FAIL_OPEN=true

# CORS 跨域配置
# 开发环境: 可以使用逗号分隔的多个域名，例如: "http://localhost:5173,http://localhost:3000"
# 生产环境: 必须指定具体域名，不能使用 "*" 通配符
# 格式: "https://domain1.com,https://domain2.com"
CORS_ORIGIN=http://localhost:5173

# ==================== 数据库配置 ====================
DB_HOST=localhost
DB_PORT=3306
DB_USERNAME=root
DB_PASSWORD=your_password_here
DB_DATABASE=medical_bible

# ==================== Redis 配置 ====================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ==================== JWT 配置 ====================
JWT_SECRET=your_jwt_secret_here_please_change_it
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# ==================== 加密密钥 ====================
# 用于加密敏感配置（如支付密钥），请使用随机字符串
# 生产环境必须设置此值，否则使用不安全的默认密钥
ENCRYPTION_KEY=your_random_encryption_key_at_least_32_chars

# ==================== 阿里云 OSS 配置 ====================
OSS_ACCESS_KEY_ID=your_access_key_id
OSS_ACCESS_KEY_SECRET=your_access_key_secret
OSS_BUCKET=medical-bible
OSS_REGION=oss-cn-beijing
OSS_ENDPOINT=https://oss-cn-beijing.aliyuncs.com

# ==================== 以下配置已迁移到数据库管理 ====================
# 短信、邮件、支付等配置现在通过后台管理界面配置
# 存储在 system_configs 表中，敏感信息会自动加密
